<!doctype html>
<!-- Catalog page with filters and product listing -->
<html lang="pt">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Catálogo — Loja de Roupas</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
  <div class="container">
    <a class="navbar-brand fw-bold" href="index.html">Clothé</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain2">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navMain2">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" href="index.html">Início</a></li>
        <li class="nav-item"><a class="nav-link active" href="catalog.html">Catálogo</a></li>
        <li class="nav-item"><a class="nav-link" href="contact.html">Contacto</a></li>
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link position-relative" href="cart.html">Carrinho <span id="cart-count-2" class="badge bg-primary rounded-pill ms-1">0</span></a></li>
      </ul>
    </div>
  </div>
</nav>

<main class="container my-4">
  <div class="row">
    <!-- Filters column -->
    <aside class="col-12 col-md-3 mb-4">
      <div class="card p-3">
        <h6>Filtrar por Categoria</h6>
        <div class="list-group" id="category-filters">
          <button class="list-group-item list-group-item-action active" data-cat="all">Todas</button>
          <button class="list-group-item list-group-item-action" data-cat="masculino">Masculino</button>
          <button class="list-group-item list-group-item-action" data-cat="feminino">Feminino</button>
          <button class="list-group-item list-group-item-action" data-cat="infantil">Infantil</button>
        </div>
      </div>
    </aside>

    <section class="col-12 col-md-9">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h4>Produtos</h4>
        <div>
          <label class="me-2">Ordenar:</label>
          <select id="sort" class="form-select form-select-sm d-inline-block w-auto">
            <option value="default">Padrão</option>
            <option value="price-asc">Preço: Crescente</option>
            <option value="price-desc">Preço: Decrescente</option>
          </select>
        </div>
      </div>

      <div class="row" id="product-list">
        <!-- Product cards injected by JS -->
      </div>
    </section>
  </div>
</main>

<footer class="bg-light py-4">
  <div class="container d-flex justify-content-between">
    <div>© <span id="year2"></span> Clothé</div>
    <div>Telefone: +351 210 000 000</div>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/cart.js"></script>
<script>
/* Example product catalogue. In a real project these come from a backend. */
const products = [
  {"id":"p1","name":"T-shirt Básica Preta","category":"masculino","price":19.90,"image":"https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=800&auto=format&fit=crop&q=60","desc":"Corte regular, algodão leve."},
  {"id":"p4","name":"Camisola Oversized","category":"masculino","price":39.90,"image":"https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=800&auto=format&fit=crop&q=60","desc":"Conforto urbano."},
  {"id":"p2","name":"Vestido Floral","category":"feminino","price":49.90,"image":"https://images.unsplash.com/photo-1520975912262-6b1fcd9c8f4a?w=800&auto=format&fit=crop&q=60","desc":"Leve e fluido."},
  {"id":"p5","name":"Blusa de Linho","category":"feminino","price":34.50,"image":"https://images.unsplash.com/photo-1495121605193-b116b5b09a9b?w=800&auto=format&fit=crop&q=60","desc":"Ideal para o verão."},
  {"id":"p3","name":"Casaco Infantil","category":"infantil","price":29.90,"image":"https://images.unsplash.com/photo-1546171735-5b9bd4f8b8a0?w=800&auto=format&fit=crop&q=60","desc":"Aquecimento suave para os miúdos."},
  {"id":"p6","name":"Calças Jogger","category":"infantil","price":24.00,"image":"https://images.unsplash.com/photo-1520975683576-2d8b2a6c8a55?w=800&auto=format&fit=crop&q=60","desc":"Flexíveis e duráveis."}
];

function renderProducts(list){
  const cont = document.getElementById('product-list');
  cont.innerHTML = '';
  list.forEach(p=>{
    cont.innerHTML += `
      <div class="col-12 col-sm-6 col-lg-4 mb-4">
        <div class="card h-100">
          <img src="${p.image}" class="card-img-top" alt="${p.name}">
          <div class="card-body d-flex flex-column">
            <h6 class="card-title">${p.name}</h6>
            <p class="small text-muted">${p.desc}</p>
            <div class="mt-auto d-flex justify-content-between align-items-center">
              <div><strong>€ ${p.price.toFixed(2)}</strong></div>
              <div>
                <button class="btn btn-sm btn-outline-primary add-to-cart" data-id="${p.id}" data-name="${p.name}" data-price="${p.price}" data-image="${p.image}">Adicionar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    `;
  });
  attachAddButtons();
}

/* Filters */
document.getElementById('category-filters').addEventListener('click', e=>{
  if(e.target && e.target.dataset.cat !== undefined){
    document.querySelectorAll('#category-filters .list-group-item').forEach(el=>el.classList.remove('active'));
    e.target.classList.add('active');
    const cat = e.target.dataset.cat;
    const filtered = cat==='all' ? products : products.filter(p=>p.category===cat);
    renderProducts(filtered);
  }
});
/* Sort */
document.getElementById('sort').addEventListener('change', e=>{
  const v = e.target.value;
  let copy = [...products];
  if(v==='price-asc') copy.sort((a,b)=>a.price-b.price);
  if(v==='price-desc') copy.sort((a,b)=>b.price-a.price);
  renderProducts(copy);
});

/* Initial render */
renderProducts(products);
document.getElementById('year2').textContent = new Date().getFullYear();
</script>
</body>
</html>
